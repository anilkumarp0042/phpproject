{% extends 'referent/layout.html.twig' %}

{% block javascripts %}
<script type="text/javascript">
    Kernel.onLoad(function() {
        App.runReferentUsers(
            [
                {
                    key: 'id',
                    name: 'ID',
                    style: {
                        width: 25
                    }
                },
                {
                    key: 'postalCode',
                    name: 'Code postal',
                    style: {
                        width: 100
                    }
                },
                {
                    key: 'name',
                    name: 'Nom'
                },
                {
                    key: 'age',
                    name: 'Age',
                    className: 'datagrid__table__col--hide-mobile',
                    style: {
                        width: 50
                    }
                },
                {
                    key: 'committees',
                    name: 'Comités',
                    className: 'datagrid__table__col--hide-mobile'
                },
                {
                    key: 'city',
                    name: 'Ville',
                    className: 'datagrid__table__col--hide-mobile'
                },
                {
                    key: 'country',
                    name: 'Pays',
                    className: 'datagrid__table__col--hide-mobile',
                    style: {
                        width: 60
                    }
                },
                {
                    key: 'createdAt',
                    name: 'Inscription',
                    className: 'datagrid__table__col--hide-mobile',
                    style: {
                        width: 150
                    }
                },
                {
                    key: 'emailsSubscription',
                    name: 'Abonné aux mails ?',
                    className: 'datagrid__table__col--hide-mobile',
                    style: {
                        width: 100
                    }
                }
            ],
            {{ managedUsersJson|raw }}
        );
    });
</script>
{% endblock %}

{% block referent_content %}
    <h3>
        {% block referent_users_list_title %}{% endblock %}
    </h3>

    <p>
        {% block referent_users_list_description %}{% endblock %}
    </p>

    <hr />

    <form method="post" action="{% block referent_users_list_action %}{% endblock %}">
        <div id="selected-users">
            <button class="btn btn--blue referent__btn-send-mail" id="send-mail-btn" disabled="disabled">
                Envoyer un e-mail
            </button>

            <span class="referent__users-count-container">
                <span id="selected-users-count">0</span> utilisateur(s) sélectionnés
            </span>

            <div id="csv-export">
                <a class="btn btn--blue referent__btn-export-csv disabled">
                    Export CSV
                </a>
            </div>
            <input type="hidden" name="selected_users_json" id="selected-users-json" />
        </div>
    </form>

    <hr />

    <div id="users-list"></div>
{% endblock %}
